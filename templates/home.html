<!doctype html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

    <link rel="shortcut icon" href="https://th.seaicons.com/wp-content/uploads/2015/06/Animals-Cat-Footprint-icon.png"
        type="image/x-icon">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.0/fullcalendar.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/locale/th.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.0/fullcalendar.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/html5-qrcode@2.0.9/dist/html5-qrcode.min.css" rel="stylesheet">


    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Charm:wght@400;700&family=K2D:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,700;1,800&display=swap"
        rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>

    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">


    {% load humanize %}

</head>

</head>

<body class="" style="font-family: 'K2D', sans-serif;">

    <nav class="bg-[#7e6663] border-[#3b3b3b] py-2">
        <div class="flex flex-wrap items-center justify-between max-w-screen-xl px-4 mx-auto">
            <a href="/" class="flex items-center flex flex-row">
                <img src="https://www.i-pic.info/i/MxNX634720.png" class="h-10 mr-3 sm:h-9 flex flex"
                    alt="Landwind Logo">
                <span class="self-center flex flex-row text-xl font-semibold whitespace text-white">Baan Hao
                    Coffee</span>
            </a>
            <div class="flex items-center lg:order-2">
                <div class="hidden mt-2 mr-4 sm:inline-block">
                    <span></span>
                </div>

                <button data-collapse-toggle="mobile-menu-2" type="button"
                    class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
                    aria-controls="mobile-menu-2" aria-expanded="true">
                    <span class="hidden sr-only">Open main menu</span>
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                            clip-rule="evenodd"></path>
                    </svg>
                    <svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                            clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            <div class="items-center text-center justify-between w-full xl:flex xl:w-auto lg:order-1"
                id="mobile-menu-2">
                <ul class="flex flex-col mt-4 font-medium xl:flex-row xl:space-x-8 lg:mt-0">

                    {% if user.is_authenticated %}
                    {% if user.is_staff %}
                    <li>
                        <a href="/admin/"
                            class="block py-2 pl-3 bg-white pr-4 text-black rounded hover:bg-[#3c3c3c] hover:text-white"
                            aria-current="page">
                            <i class="fa-solid fa-building"></i>&nbsp; 
                            Back Office
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'dashboard' %}"
                            class="block py-2 pl-3 pr-4 text-white bg-[#3b3b3b] rounded hover:bg-gray-500"
                            aria-current="page">
                            <i class="fa-solid fa-solar-panel"></i>&nbsp; แดชบอร์ด
                        </a>
                    </li>

                    {% else %}
                    <li>
                        <a href="{% url 'dashboard' %}"
                            class="block py-2 pl-3 pr-4 text-white bg-[#3b3b3b] rounded hover:bg-gray-500"
                            aria-current="page">
                            <i class="fa-solid fa-solar-panel"></i>&nbsp; แดชบอร์ด
                        </a>
                    </li>
                    {% endif %}

                    <li>
                        <a href="" class="block py-2 pl-3 pr-4 text-white border-b border-gray-100">
                            <i class="fa-solid fa-user"></i>&nbsp; {{user.username|title}} {{user.first_name|title}}
                            {{user.last_name|title}}
                        </a>
                    </li>
                    <li class="">
                        <a href="{% url 'logout' %}"
                            class="block py-2 pl-3 pr-4 text-white  rounded bg-[#3b3b3b] border border-gray-100 hover:bg-red-500">ออกจากระบบ</a>
                    </li>
                    {% else %}
                    {% endif %}

                </ul>
            </div>

            <script>
                var mobileMenu = document.getElementById("mobile-menu-2");

                toggleMobileMenu();

                function toggleMobileMenu() {
                    if (mobileMenu.classList.contains("hidden")) {
                        mobileMenu.classList.remove("hidden");
                    } else {
                        mobileMenu.classList.add("hidden");

                    }
                }

                document.querySelector("[data-collapse-toggle='mobile-menu-2']").addEventListener("click", toggleMobileMenu);
            </script>

            <div class="items-center text-center justify-between w-full lg:flex lg:w-auto lg:order-1">
                <ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0">
                    {% if user.is_authenticated %}

                    {% else %}

                    <li class="">
                        <a href="{% url 'login' %}"
                            class="block py-2 pl-3 pr-4 text-white border border-gray-100 rounded bg-[#3b3b3b] hover:bg-gray-500">เข้าสู่ระบบ</a>
                    </li>
                    <li>
                        <a href="{% url 'register' %}"
                            class="block py-2 pl-3 pr-4 text-white border border-gray-100 rounded bg-[#3b3b3b] hover:bg-gray-500">สมัครสมาชิก</a>
                    </li>
                    {% endif %}

                </ul>
            </div>
        </div>
    </nav>





    {% block content %}
    <div class="text-2xl text-center mt-5 mb-5 m-5 text-black font-extrabold">
        &nbsp;บ้านเฮาคอฟฟี่ Baan Hao Coffee คาเฟ่หมาแมว&nbsp;</div>
        {% if imgcover %}

    <div
        class="w3-content w3-display-container max-w-screen-lg h-96 overflow-hidden relative border-2 border-[#3b3b3b] rounded-lg">
        {% for c in imgcover %}
        <img class="mySlides rounded-lg object-cover h-full absolute inset-0 w-full"
            src="{{c.img.url}}"
            style="width: 100%;">
        {% endfor %}

        <button class="w3-button w3-black w3-display-left text-white absolute top-1/2 left-0 transform -translate-y-1/2"
            onclick="plusDivs(-1)">&#10094;</button>
        <button
            class="w3-button w3-black w3-display-right text-white absolute top-1/2 right-0 transform -translate-y-1/2"
            onclick="plusDivs(1)">&#10095;</button>
    </div>

    <script>
        var slideIndex = 1;
        showDivs(slideIndex);

        setInterval(function () {
            plusDivs(1);
        }, 3000);

        function plusDivs(n) {
            showDivs(slideIndex += n);
        }

        function showDivs(n) {
            var i;
            var x = document.getElementsByClassName("mySlides");
            if (n > x.length) { slideIndex = 1 }
            if (n < 1) { slideIndex = x.length }
            for (i = 0; i < x.length; i++) {
                x[i].style.display = "none";
            }
            x[slideIndex - 1].style.display = "block";
        }
    </script>
        {% endif %}



    {% if news %}
    <div class="max-w-sm mx-auto">
        <div
            class="text-xl text-center font-extrabold mt-5 mb-5 bg-green-200 p-3 rounded-md border border-1 border-gray-400 shadow-lg">
            <i class="fa-solid fa-bullhorn"></i>&nbsp;&nbsp; Daily news
        </div>
    </div>
    {% for n in news %}
    <div class="m-2 ">
        <div class="max-w-screen-sm mx-auto border border-2 border-green-400 rounded-lg shadow-2xl text-gray-600">
            <div class='relative m-0 shadow-lg flex bg-green-400'>
                <div class='flex-1 card-block relative ml-4'>
                    <div class="">
                        <h4 class='font-medium text-xl mb-3 mt-3 text-center'><i class="fa-solid fa-scroll"></i> &nbsp;
                            {{n.headline}}</h4>
                        <p class='leading-normal mb-3 text-sm text-center'><i class="fa-regular fa-message"></i> &nbsp;
                            {{n.desc}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
    {% else %}
    {% endif %}



    {% if suggested_foods %}
    <div class="max-w-sm mx-auto">
        <div
            class="text-xl text-center font-extrabold mt-5 mb-5 bg-green-200 p-3 rounded-md border border-1 border-gray-400 shadow-lg">
            <i class="fa-solid fa-utensils"></i>&nbsp;&nbsp; เมนูแนะนำ
        </div>
    </div>

    {% for f in suggested_foods %}
    <div class="m-2 ">
        <div class="max-w-screen-sm mx-auto border border-2 border-gray-800 rounded-lg shadow-2xl text-white">
            <div class='relative m-0 shadow-lg flex bg-gray-700'>
                <div class='flex-no-shrink'>
                    <img alt='' class='w-auto h-32 block mx-auto rounded-tl-lg rounded-bl-lg' src='{{f.img.url}}'>
                </div>
                <div class='flex-1 card-block relative ml-4'>
                    <div class="">
                        <h4 class='font-medium text-2xl mb-3 mt-3'>{{f.name}}</h4>
                        <p class='leading-normal'>{{f.price}} ฿</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

    {% else %}
    {% endif %}


    <div class="max-w-sm mx-auto">
        <div
            class="text-xl text-center font-extrabold mt-5 mb-5 bg-green-200 p-3 rounded-md border border-1 border-gray-400 shadow-lg">
            <i class="fa-solid fa-calendar-days"></i>&nbsp;&nbsp; ตารางน้องหมา-น้องแมว
        </div>
    </div>

    <div id="calendar"
        class="m-3 max-w-screen-md mx-auto p-4 bg-white mt-5 mb-10 rounded-lg shadow-md border border-gray-500 border-2">
    </div>

    <style>
        #calendar .fc-event {
            background-color: #3b3b3b;
            border: #3b3b3b;
        }

        .mySlides {
            display: none;
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', function () {

            moment.locale('th');

            $('#calendar').fullCalendar({
                events: '/calendar-events/',
                locale: 'th',

                eventRender: function (event, element) {

                    var eventHtml = '<div class="flex items-center">';
                    if (event.image) {
                        eventHtml += '<div class="items-center">';
                        eventHtml += '<a href="/pets/' + event.id + '">';
                        eventHtml += '<img src="' + event.image + '" class="object-cover mx-auto w-auto">';
                        eventHtml += '</a>';
                        eventHtml += '<div class="font-bold mt-2 text-center">' + event.title + '</div>';
                        eventHtml += '<div class="text-sm text-center">' + moment(event.start).format('LT') + '</div>';
                        eventHtml += '</div></div>';

                        element.css('#3b3b3b', event.backgroundColor);
                        element.find('.fc-content').html(eventHtml);
                    }
                }
            });
        });
    </script>


{% if pets %}
    <div class="mx-auto max-w-screen-lg px-4 sm:px-8 mb-28">
        <div class="overflow-y-hidden rounded-lg border">
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="bg-[#3b3b3b] text-left text-xs font-semibold uppercase tracking-widest text-white">
                            <th class="px-5 py-3">เลขประจำตัว</th>
                            <th class="px-5 py-3">ชื่อ</th>
                            <th class="px-5 py-3">เพศ</th>
                            <th class="px-5 py-3">พันธ์ุ</th>
                            <th class="px-5 py-3">อายุ/ปี</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-500">
                        {% for p in pets %}

                        <tr>
                            <td class="border-b border-gray-200 bg-white px-5 py-5 text-sm">
                                <p class="whitespace-no-wrap">{{ p.id }}</p>
                            </td>
                            <td class="border-b border-gray-200 bg-white px-5 py-5 text-sm">
                                <a href="{% url 'pets' p.id %}">

                                    <div class="flex items-center">
                                        <div class="h-10 w-10 flex-shrink-0">
                                            <img class="h-full w-full rounded-full"
                                                src="{% if p.profile %} {{ p.profile.url }} {% else %}{% endif %}"
                                                alt="" />
                                        </div>
                                        <div class="ml-3">
                                            <p class="whitespace-no-wrap">{{p.name}}</p>
                                        </div>
                                    </div>
                                </a>

                            </td>

                            <td class="border-b border-gray-200 bg-white px-5 py-5 text-sm">
                                <p class="whitespace-no-wrap">{{p.sex}}</p>
                            </td>
                            <td class="border-b border-gray-200 bg-white px-5 py-5 text-sm">
                                <p class="whitespace-no-wrap">{{p.breed}}</p>
                            </td>

                            <td class="border-b border-gray-200 bg-white px-5 py-5 text-sm">
                                <span
                                    class="rounded-full bg-green-200 px-3 py-1 text-xs font-semibold text-green-900">{{p.age}}</span>
                            </td>


                        </tr>
                        {% endfor %}

                    </tbody>
                </table>
            </div>

        </div>
    </div>
    
    {% endif %}


    {% endblock %}
</body>


</html>